# Shop API — интернет-магазин на FastAPI

Бэкенд интернет-магазина с JWT-авторизацией, ролями, корзиной и заказами.

В документации можно зайти в аккаунт с помощью формы, разлогинится и удалить аккаунты с помощью эндпоинтов.

## Стек
- Python 3.12
- FastAPI (async)
- SQLAlchemy 2.0 + Alembic
- PostgreSQL
- Redis (для хранения активных токенов)
- Alembic
- Poetry (управление зависимостями)
- Docker + docker-compose

## Роли пользователей
| Роль       | id | Описание                                | По умолчанию |
|------------|----|-----------------------------------------|--------------|
| `user`     | 1  | Обычный зарегистрированный пользователь ( может просматривать свои заказы, изменять, получать информацию про себя, просматривать продукты| Yes       |
| `customer` | 2  | Продавец(может изменять и добавлять продукты)                                | —         |
| `manager`  | 3  | Менеджер магазина (может оформлять, изменять, удалять заказы)                      | —         |
| `admin`    | 4  | Полный доступ (суперпользователь)       | —         |

Суперпользователь создаётся автоматически при первом запуске:  
`admin@shop.ru` / `admin123` (сменить в `.env`)

## Быстрый старт

### Вариант 1 — через Docker (рекомендуется)
```bash
# Клонируем и заходим
git clone [<репозиторий>](https://github.com/AnyaBonty/shop.git
)
cd shop

# Копируем .env
cp .env.example .env

# Запускаем всё одной командой
docker compose up --build

API доступен по адресу: http://localhost:8000
Документация (Swagger): http://localhost:8000/docs
```




### Вариант 2 — локально (для разработки)
Bash
```
# Устанавливаем зависимости
poetry install

# Копируем .env
cp .env.example .env

# Запускаем PostgreSQL и Redis через Docker
docker compose up postgres redis -d

# Применяем миграции
poetry run alembic upgrade head

#запусквем PostgreSQL , создаем базу данных
#запускам Redis 

# Запускаем сервер
poetry run uvicorn backend.app.main:app --reload
→ http://127.0.0.1:8000/docs
```


